<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-05-09 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160509" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; User Guide</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-05-09
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.6
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <span class="none"></span>
        Installation</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>User's Guide</a>
          </li>
                              <li class="nav-header">Test Suite Development</li>
                              
      <li>
  
                          <a href="testng-essentials.html" title="Using TestNG, Part 1: Essentials">
          <span class="none"></span>
        Using TestNG, Part 1: Essentials</a>
            </li>
                
      <li>
  
                          <a href="testng-cookbook.html" title="Using TestNG, Part 2: Cookbook">
          <span class="none"></span>
        Using TestNG, Part 2: Cookbook</a>
            </li>
                
      <li>
  
                          <a href="ctl.html" title="Using CTL Scripts">
          <span class="none"></span>
        Using CTL Scripts</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="relnotes.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>User Guide</h1>
<p>This document provides some general guidance about how to use TEAM Engine to execute a test run and view the results. There are three ways to interact with the test harness: a command shell, the web application, or a REST-like API.</p>
<div class="section">
<h2><a name="Command_shell"></a>Command shell</h2>
<p>When a test is executed a Java applet will popup and display a form for the user to fill in with the details of the implementation to be tested. The user completes the form and in some cases will need to perform visual inspection and fill in other forms. There are two ways to run a test: interactively or non-interactively by providing the form responses in a file.</p>
<div class="section">
<h3><a name="Running_a_test_suite_interactively"></a>Running a test suite interactively</h3>
<p>The console application (teamengine-console-\${project.version}-bin.zip) includes shell scripts for running test suites in Windows and Unix-like (Bash shell) environments. Unpack the archive into a convenient location (TE_HOME); the contents are as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">TE_HOME
  |-- bin/        # shell scripts (windows, unix)
  |-- lib/        # supporting libraries
  |-- resources/  # classpath resources (schemas, etc.)
</pre></div></div>
<p>If desired, set the value of the <tt>TE_BASE</tt> environment variable in the <tt>setenv</tt> script; otherwise set it for the user environment according to the particulars of the operating system in use. Once this is done, change to the appropriate script directory (TE_HOME/bin/{unix,windows}) or add it to the system path.</p>
<p><img src="./images/warn-16px.png" alt="warning" /> <b>Warning:</b> If a test suite requires any supporting libraries that are not included with the core distribution, these must be added to the TE_BASE/resources/lib directory.</p>
<p>To view a brief summary of a test suite, run the <tt>listsuites</tt> script and specify the location of the root CTL script (relative to TE_BASE/scripts).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&gt; listsuites -source=note.ctl

Suite note:note-test ({http://example.net/note-test}note-test)
Sample test suite
Checks the content of a note.
</pre></div></div>
<p>To execute a test suite, run the <tt>test</tt> script and specify the location of the root CTL script (this contains the ctl:suite element); the file reference may be an absolute filesystem location or relative to TE_BASE/scripts. The test results will be written to a subdirectory <i>sNNNN</i> created in TE_BASE/users/<i>username</i>/.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&gt; test -source=note.ctl

Testing suite note:note-test in Test Mode with defaultResult of Pass ...
Testing note:main type Mandatory in Test Mode with defaultResult Pass (s0002)
...
</pre></div></div></div>
<div class="section">
<h3><a name="Running_a_test_suite_non-interactively"></a>Running a test suite non-interactively</h3>
<p>It is possible to run the tests in a headless, unattended manner by providing files containing the form responses. Form files are specified via the <tt>-form</tt> parameter, more than one form can be provided using multiple <tt>-form</tt> parameters. For example, the WMS 1.1.1 tests can be run with the following command:</p>

<div class="source">
<div class="source"><pre class="prettyprint"> $ test.sh -source=wms/1.1.1/ctl/ \
   -form=$forms/wms-1.1.1.xml \
   -form=forms/yes.xml
</pre></div></div>
<p>Where <tt>forms/wms-1.1.1.xml</tt> is:</p>

<div class="source">
<div class="source"><pre class="prettyprint"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 &lt;values&gt;
   &lt;value key=&quot;VAR_WMS_CAPABILITIES_URL&quot;&gt;
   http://host1/wms?service=WMS&amp;amp;version=1.1.1&amp;amp;request=GetCapabilities
   &lt;/value&gt;
   &lt;value key=&quot;updatesequence&quot;&gt;auto_updatesequence&lt;/value&gt;
   &lt;value key=&quot;VAR_HIGH_UPDATESEQUENCE&quot;&gt;100&lt;/value&gt;
   &lt;value key=&quot;VAR_LOW_UPDATESEQUENCE&quot;&gt;0&lt;/value&gt;
   &lt;value key=&quot;CERT_PROFILE&quot;&gt;queryable_profile&lt;/value&gt;
   &lt;value key=&quot;recommended&quot;&gt;recommended&lt;/value&gt;
   &lt;value key=&quot;testgml&quot;&gt;testgml&lt;/value&gt;
   &lt;value key=&quot;free&quot;&gt;free&lt;/value&gt;
   &lt;value key=&quot;B_BOX_CONSTRAINT&quot;&gt;eitherbboxconstraint&lt;/value&gt;
 &lt;/values&gt;
</pre></div></div>
<p>and <tt>forms/yes.xml</tt> is:</p>

<div class="source">
<div class="source"><pre class="prettyprint"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 &lt;values&gt;
   &lt;value key=&quot;submit&quot;&gt;yes&lt;/value&gt;
   &lt;value key=&quot;answer&quot;&gt;yes&lt;/value&gt;
 &lt;/values&gt;
</pre></div></div>
<p>The form files are used by TEAM Engine in the same order as provided on the command line. In case that the test requires filling more forms than provided on the command line, the last provided form is going to be used multiple times: for example, in the WMS 1.1.1 case, the test will ask the user to visually confirm visual relationships between two maps, the <tt>yes.xml</tt> form will be used for all those requests.</p>
<p>After the test is invoked via command line, the console output will retrieve the information from the forms before providing the test results.</p>
<p>For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">  INFO: Setting form results:
   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;values&gt;
     &lt;value key=&quot;VAR_WMS_CAPABILITIES_URL&quot;&gt;
     http://host1/wms?service=WMS&amp;amp;version=1.1.1&amp;amp;request=GetCapabilities
     &lt;/value&gt;
     &lt;value key=&quot;updatesequence&quot;&gt;auto_updatesequence&lt;/value&gt;
     &lt;value key=&quot;VAR_HIGH_UPDATESEQUENCE&quot;&gt;100&lt;/value&gt;
     &lt;value key=&quot;VAR_LOW_UPDATESEQUENCE&quot;&gt;&lt;/value&gt;
     &lt;value key=&quot;CERT_PROFILE&quot;&gt;queryable_profile&lt;/value&gt;
     &lt;value key=&quot;testgml&quot;&gt;testgml&lt;/value&gt;
     &lt;value key=&quot;free&quot;&gt;free&lt;/value&gt;
     &lt;value key=&quot;B_BOX_CONSTRAINT&quot;&gt;eitherbboxconstraint&lt;/value&gt;
  &lt;/values&gt;

  Testing suite wms:main_wms in Test Mode with defaultResult of Pass ...
  ...
  Testing wms:wmsops-getmap-params-bbox-2 type Mandatory in Test 
  Mode with defaultResult Pass (s0004/d275e678_1)...
     Assertion: When a GetMap request uses decimal values for the 
     BBOX parameter, then the response is valid.

  Jul 12, 2015 2:44:20 PM com.occamlab.te.TECore setFormResults
  INFO: Setting form results:
   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;values&gt;
    &lt;value key=&quot;submit&quot;&gt;yes&lt;/value&gt;
    &lt;value key=&quot;answer&quot;&gt;yes&lt;/value&gt;
  &lt;/values&gt;
        Test wms:wmsops-getmap-params-bbox-2 Passed
</pre></div></div></div></div>
<div class="section">
<h2><a name="Web_application"></a>Web application</h2>
<div class="section">
<h3><a name="Using_the_Web_Browser_Interface"></a>Using the Web Browser Interface</h3>
<p>The web application (teamengine.war) provides a user interface for selecting test suites, browsing test documentation, and launching test runs. The welcome page (e.g. <a class="externalLink" href="http://localhost:8080/teamengine">http://localhost:8080/teamengine</a>) displays a list of all available test suites. In a new installation a sample suite for the fictitious &#x201c;XML Note&#x201d; specification should appear. The listed test suites correspond to entries in the main configuration file located at TE_BASE/config.xml.</p>
<p>Select &#x201c;Login&#x201d; and then supply the appropriate credentials or register to create a new user account. After logging in, previous test sessions are displayed. Select &#x201c;Create new session&#x201d; and choose a test suite to execute.</p>
<p>The TE_BASE/config.xml file is a &#x201c;watched&#x201d; resource&#x2013;the web application will be reloaded whenever this file is modified. This means that test suites can be added or updated and become available for use without having to restart the Tomcat instance. Simply put the CTL scripts in TE_BASE/scripts and insert or update an entry in the main configuration file. Supporting libraries, if any, must be placed in the WEB-INF/lib directory.</p>
<p>As a convenience, the <tt>ets-resources</tt> project may be <a class="externalLink" href="https://github.com/opengeospatial/ets-resources">cloned from GitHub</a> and built (run &#x2018;mvn package&#x2019;) to generate an archive containing all supporting libraries for the latest OGC test suites. The contents of the archive are described below.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>name </th>
      
<th>description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>config.xml </td>
      
<td>TEAM-engine instance configuration file (TE_BASE/config.xml).</td>
    </tr>
    
<tr class="a">
      
<td>ctl-scripts-release.csv </td>
      
<td>A CSV file that contains a list of test suite releases. Each line has two fields: Git repository URL, tag name.</td>
    </tr>
    
<tr class="b">
      
<td>lib/*.jar </td>
      
<td>A directory containing the required Java libraries that must be available on the class path; that is, WEB-INF/lib for the web application or TE_BASE/resources/lib for command-line execution.</td>
    </tr>
    
<tr class="a">
      
<td>bin/ </td>
      
<td>A directory containing shell scripts for Windows- and UNIX-based (Linux/Mac) hosts. The `setup-tebase` script will set up a TEAM-engine instance (TE_BASE) with the test suites identified in a referenced CSV file.</td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h3><a name="Using_the_REST_API"></a>Using the REST API</h3>
<p>A simple REST API (based on <a class="externalLink" href="http://jcp.org/en/jsr/detail?id=311">JAX-RS 1.1</a>) enables programmatic execution of some test suites; currently only TestNG-based suites can be run in this manner. It exposes the following end points:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>URI (relative to base) </th>
      
<th>Resource </th>
      
<th>Representation </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>/rest/suites </td>
      
<td>Test suite collection </td>
      
<td>application/xhtml+xml </td>
    </tr>
    
<tr class="a">
      
<td>/rest/suites/{etsCode}/{etsVersion} </td>
      
<td>Test suite documentation </td>
      
<td>text/html </td>
    </tr>
    
<tr class="b">
      
<td>/rest/suites/{etsCode}/{etsVersion}/run </td>
      
<td>Test run controller </td>
      
<td>application/xml </td>
    </tr>
  </tbody>
</table>
<p>In the request URIs the <tt>{etsCode}</tt> and <tt>{etsVersion}</tt> parameters denote the test suite code and version, respectively, for a particular test suite.</p>
<p><img src="./images/warn-16px.png" alt="warning" /> <b>Warning:</b> When using the REST API, if any test run argument includes a URI value that contains an ampersand (&#x2018;&amp;&#x2019;) character in a query component, it must be percent-encoded as %26 since it is a &#x201c;data octet&#x201d; in this context (see <a class="externalLink" href="http://tools.ietf.org/html/rfc3986#section-2.1">RFC 3986, sec. 2.1</a>).</p>
<p>The test run parameters are described in the test suite summary document. This document can be viewed from the web application by selecting the <i>Test Suite Revision</i> link displayed on the home page; the REST API will also present the document at the <tt>/rest/suites/{etsCode}/{etsVersion}</tt> endpoint. Each parameter is either mandatory, conditional (required under certain circumstances), or optional.</p>
<p>If a test suite is being deployed manually, a couple of steps are required to set up an executable test suite (ETS) that was implemented using the TestNG framework. Note that the first step is <b>not</b> required in order to use the REST API.</p>

<ol style="list-style-type: decimal">
  
<li>Unpack the *-ctl.zip archive into the TE_BASE/scripts directory; it includes test suite documentation and a simple CTL wrapper script that invokes the main controller.</li>
  
<li>Put the ETS component (a binary JAR file) and any dependencies into the <tt>WEB-INF/lib</tt> directory of the web application.</li>
</ol>
<p>The <tt>*-deps</tt> archive assembles the ETS and its dependencies into a single bundle that is unpacked into the lib directory in the last step. In some cases it may be necessary to add other (transitive) dependencies. The Tomcat instance does not need to be restarted to enable the test suite&#x2013;it should be available immediately.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
